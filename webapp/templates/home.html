{% extends "base.html" %}

{% block content %}

<!-- ðŸŒŸ Creative Header -->
<div class="text-center mb-5 py-4" style="background: linear-gradient(to right, #00c6ff, #0072ff); color: white; border-radius: 12px;">
    <h2 class="fw-bold mb-1 animate__animated animate__fadeInDown">
        <i class="fas fa-trash-alt me-2"></i>Smart Bin Monitoring Dashboard
    </h2>
    <p class="lead animate__animated animate__fadeInUp">AI-Powered Detection & Real-Time Bin Access</p>
</div>

<!-- ðŸŽ¨ Styles -->
<style>
    body {
        background: linear-gradient(to bottom right, #f0f8ff, #dfefff);
    }
    .bin-section, .camera-section {
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 114, 255, 0.2);
        padding: 25px;
        background-color: #fff;
    }
    video, img {
        width: 100%;
        border-radius: 10px;
        border: 2px solid #0072ff;
    }
    .detected-info {
        font-size: 1.2rem;
        padding: 15px;
        border-radius: 10px;
        background-color: #e3f2fd;
        color: #0d47a1;
        margin-top: 20px;
        font-weight: bold;
        animation: pulse 2s infinite;
    }
    .signal {
        font-size: 1.1rem;
        padding: 12px;
        border-radius: 10px;
        background-color: #fff3e0;
        color: #e65100;
        margin-top: 10px;
        font-weight: bold;
    }
    .bin-status {
        font-size: 1rem;
        padding: 10px 15px;
        border-radius: 8px;
        margin-top: 10px;
        background-color: #f8f9fa;
    }
    .badge-open {
        background-color: #4caf50;
        color: white;
    }
    .badge-closed {
        background-color: #9e9e9e;
        color: white;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.02); }
        100% { transform: scale(1); }
    }
</style>

<!-- ðŸ“¸ Content -->
<div class="container">
    <div class="row">

        <!-- ðŸŽ¥ Live Feed -->
        <!-- <div class="col-md-6 mb-4 camera-section">
            <h4 class="text-center mb-3">Live Camera Feed</h4>
            <img src="{{ url_for('video_feed') }}" alt="Live Video">
        </div> -->
        <div class="col-md-6 mb-4 camera-section">
            <h4 class="text-center mb-3">Live Camera Feed</h4>
            <!-- Replace below src with actual stream later -->
            <video autoplay muted loop>
                <source src="{{ url_for('static', filename='sample.mp4') }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <!-- ðŸ§  Detection Output -->
        <div class="col-md-6 mb-4 bin-section">
            <h4 class="text-center mb-3">Detection & Bin Signal</h4>

            <!-- Detected Class -->
            {% if detected_class %}
                <div id="detectedClass" class="detected-info text-center">
                    Detected: {{ detected_class }}
                </div>

                <!-- Bin Open Signal -->
                {% for bin_type, is_open in bin_open_status.items() %}
                    {% if is_open %}
                        <div id="binSignal" class="signal text-center">
                            âž¡ Opening: ðŸš® {{ bin_type }} Bin
                        </div>
                    {% endif %}
                {% endfor %}

            {% else %}
                <div class="alert alert-warning text-center fw-bold">
                    ðŸš« No Class Detected
                </div>
            {% endif %}

            <!-- Bin Status Overview -->
            <div class="mt-4">
                <h6 class="fw-bold mb-2">Bin Status:</h6>
                {% for bin_type, is_open in bin_open_status.items() %}
                    <div class="bin-status d-flex justify-content-between align-items-center">
                        {{ bin_type }} Bin
                        <span class="badge {{ 'badge-open' if is_open else 'badge-closed' }}">
                            {{ "OPEN" if is_open else "CLOSED" }}
                        </span>
                    </div>
                {% endfor %}
            </div>
        </div>

    </div>
</div>

<!-- ðŸŒˆ Animation CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

{% endblock %}
